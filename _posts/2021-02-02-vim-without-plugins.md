---
title:  无插件 VIM 编程技巧
author: xjliang
date: 2021-02-02 10:07:30 +0800
categories: [Technology]
tags: [vim, editor]
---

这篇文章里的这些技巧全都是 vim 原生态的，不需要你安装什么插件。这里面是日常用 Vim 编程的一些技巧列出来给大家看看，希望对大家有用。

## 浏览代码

浏览目录的命令很简单：（你也可以直接 vim 一个目录）

> :E

注意，是大写。

**在新弹出的界面中，你可以用 j, k 键上下移动，然后回车，进入一个目录，或是找开一个文件**。你可以看到上面有一堆命令：

- 【–】 到上级目录
- 【D】删除文件（大写）
- 【R】改文件名（大写）
- 【s】对文件排序（小写）
- 【x】执行文件

如果你要改变当前浏览的目录，或是查看当前浏览的目录，你可以使用和 shell 一样的命令：

> **:cd <dir> – 改变当前目录**
>
> **:pwd  – 查看当前目录**

## 缓冲区

其实，你用：E 浏览打开的文件都没有被关闭，这些文件都在缓冲区中。你可以用下面的命令来查看缓冲区：

> **:ls**
>
> **:buffer n**

注意，

- 你可以像在 Shell 中输入命令按 Tab 键补全一样补全 Vim 的命令。
- 也可以用像 gdb 一样用最前面的几个字符，只要没有冲突。如：buff

你还可以动用如下命令，快速切换：

> :bnext    缩写 :bn
> :bprevious  缩写 :bp
> :blast  缩写 :bl
> :bfirst 缩写 :bf

缓冲区的一些相关标记如下：

– （非活动的缓冲区）
a （当前被激活缓冲区）
h （隐藏的缓冲区）
% （当前的缓冲区）
\# （交换缓冲区）
= （只读缓冲区）
\+ （已经更改的缓冲区）

## 窗口分屏浏览

**:He  全称为 :Hexplore  （在下边分屏浏览目录）**

**:Ve 全称为 :Vexplore （在左边分屏间浏览目录，要在右边则是 :Ve!）**

在分屏间的跳转和切换：**先按 Ctrl + W，然后按方向键：h j k l**

## 分屏同步移动

要让两个分屏中的文件同步移动，很简单，你需要到需要同步移动的两个屏中都输入如下命令（相当于使用 “铁锁连环”）：

>  **:set scb**

如果你需要解开，那么就输入下面的命令：

>  **:set scb!**

注：set scb 是 set scrollbind 的简写。

## Tab 页浏览目录

分屏可能会让你不爽，你可能更喜欢像 Chrome 这样的分页式的浏览，那么你可以用下面的命令：

> **:Te  全称是 :Texplorer**

我们要在多个 Tabe 页中切换，在 normal 模式下，你可以使用下面三个按键（注意没有冒号）：

> **gt  – 到下一个页**
>
> **gT  – 到前一个页**
>
> **{i} gt  – i 是数字，到指定页，比如：5 gt 就是到第 5 页**

你可以以使用 【:tabm {n}】来切换 Tab 页。

gvim 应该是：Ctrl+PgDn 和 Ctrl+PgUp 来在各个页中切换。

如果你想看看你现在打开的窗口和 Tab 的情况，你可以使用下面的命令：

> **:tabs**

使用如下命令可以关闭 tab：（当然，我更喜欢使用传统的:q, :wq 来关闭）

> **:tabclose [i]** – 如果后面指定了数字，那就关闭指定页，如果没有就关闭当前页

最后提一下，如果你在 Shell 命令行下，你可以使用 vim 的 -p 参数来用 Tab 页的方式打开多个文件，比如：

> **vim -p cool.cpp shell.cpp haoel.cpp
> vim -p \*.cpp**

**注：如果你想把 buffer 中的文件全转成 tab 的话，你可以使用下面的命令**

> **:bufdo tab split**

## Quickfix

假如我们有一个 hello.cpp 文件和一个 makefile，于是我们可以直接在 vim 下输入 :make ， 于是就可以 make 这个 hello.cpp 文件，如果出错了，我们需要按回车返回，这个时候，我们可以使用下面的命令来把出错显到在 vim 的分屏中：

> **:cw**

你可以使用下面的命令而不用回到 quickfix 中来：

> **:cp 跳到上一个错误**
>
> **:cn 跳到下一个错误**
>
> **:cl 列出所有错误**
>
> **:cc 显示错误详细信息**

## 关键字补全

我们还是坚持不用任何插件。我们来看看是怎么个自动补全的。

在 insert 模式下，我们可以按如下快捷键：

> 【**Ctrl +N**】  – 当你按下这它时，你会发现 Vim 就开始搜索你这个目录下的代码，搜索完成了就会出现一个下拉列表（居然是粉紫色的，真是丑死了）

下图是我输入了 ngx_http_然后按 ctrl+n 出现的样子，它已经帮我补全了一个，但是我不想要这个。然后，在 Vim 的下方我们可以看到状态变成了 “关键字补全”，然后后面有 ^N^P 的提示，意思就是告诉你还有一个 Ctrl+P.

> 【**Ctrl + P**】 – 接下来你可以按这个键，于是回到原点，然后你可以按上下光标键来选择相应的 Word。

与此类似的，还有更多的补齐，都在 Ctrl +X 下面：

- Ctrl + X 和 Ctrl + D 宏定义补齐
- Ctrl + X 和 Ctrl + ] 是 Tag 补齐
- Ctrl + X 和 Ctrl + F 是文件名 补齐
- Ctrl + X 和 Ctrl + I 也是关键词补齐，但是关键后会有个文件名，告诉你这个关键词在哪个文件中
- Ctrl + X 和 Ctrl +V 是表达式补齐
- Ctrl + X 和 Ctrl +L 这可以对整个行补齐，变态吧。

## 其它技巧

### 字符相关

【guu 】 – 把一行的文字变成全小写。或是【Vu】

【gUU】 – 把一行的文件变成全大写。或是【VU】

按【v】键进入选择模式，然后移动光标选择你要的文本，按【u】转小写，按【U】转大写

【ga】 –  查看光标处字符的 ascii 码

【g8】 – 查看光标处字符的 utf-8 编码

【gf】  – 打开光标处所指的文件 （这个命令在打到 #include 头文件时挺好用的，当然，仅限于有路径的）

【*】或【#】在当前文件中搜索当前光标的单词

### 缩进相关

【>>】向右给它进当前行 【<<】向左缩进当前行

【=】  – 缩进当前行 （和上面不一样的是，它会对齐缩进）

【=%】 – 把光标位置移到语句块的括号上，然后按 =%，缩进整个语句块（% 是括号匹配）

【G=gg】 或是 【gg=G】  – 缩进整个文件（G 是到文件结尾，gg 是到文件开头）

### 复制粘贴相关

按【v】 键进入选择模式，然后按 h,j,k,l 移动光标，选择文本，然后按 【y】 进行复制，按 【p】 进行粘贴。

【dd】剪切一行（前面加个数字可以剪切 n 行），【p】粘贴

【yy】复制一行（前面加个数字可以复制 n 行），【p】粘贴

### 光标移动相关

【Ctrl + O】向后回退你的光标移动

【Ctrl + I 】向前追赶你的光标移动

这两个快捷键很有用，可以在 Tab 页和 Windows 中向前和向后 trace 你的光标键，这也方便你跳转光标。

### 读取 Shell 命令相关

【:r!date】 插入日期

上面这个命令，:r 是:read 的缩写，! 是表明要运行一个 shell 命令，意思是我要把 shell 命令的输出读到 vim 里来。



原文：[无插件 Vim 编程技巧 | 酷 壳 - CoolShell](https://coolshell.cn/articles/11312.html)